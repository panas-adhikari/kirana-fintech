{"is_source_file": true, "format": "TypeScript", "description": "This file defines staff-related services for a fin-tech application, including functions to fetch and add staff members, with database interactions via Supabase.", "external_files": ["@/lib/supabase/server", "@/types"], "external_methods": ["createServerClient", "createAdminClient"], "published": ["getStaffMembers", "addStaffMember"], "classes": [], "methods": [{"name": "export async function getStaffMembers(storeId: string, branchId?: string): Promise<{ data?: User/ getStaffMembers", "description": "Fetches staff members associated with a specified store (and optionally a branch) from the database.", "scope": "", "scopeKind": ""}, {"name": "export async function addStaffMember( addStaffMember", "description": "Creates a new staff member in the system by adding a user to the authentication system and the database.", "scope": "", "scopeKind": ""}], "calls": ["createServerClient", "createAdminClient", "supabase.from", "supabase.select", "supabase.in", "supabase.order", "supabase.auth.admin.createUser", "supabase.from (insert)"], "search-terms": ["staffService", "getStaffMembers", "addStaffMember", "supabase", "staff", "storeId", "branchId", "createAdminClient", "createServerClient"], "state": 2, "file_id": 60, "knowledge_revision": 217, "git_revision": "407fc76aca9d4e2629877b12781490020c6f85a2", "ctags": [{"_type": "tag", "name": "addStaffMember", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/staffService.ts", "pattern": "/^export async function addStaffMember($/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/staffService.ts", "pattern": "/^        const { data, error } = await supabase$/", "language": "TypeScript", "kind": "constant", "scope": "getStaffMembers", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/staffService.ts", "pattern": "/^        const { data: authData, error: authError } = await supabaseAdmin.auth.admin.createUser({$/", "language": "TypeScript", "kind": "constant", "scope": "addStaffMember", "scopeKind": "function"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/staffService.ts", "pattern": "/^        const { data, error } = await supabase$/", "language": "TypeScript", "kind": "constant", "scope": "getStaffMembers", "scopeKind": "function"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/staffService.ts", "pattern": "/^        const { data: authData, error: authError } = await supabaseAdmin.auth.admin.createUser({$/", "language": "TypeScript", "kind": "constant", "scope": "addStaffMember", "scopeKind": "function"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/staffService.ts", "pattern": "/^        const { error: userError } = await supabase$/", "language": "TypeScript", "kind": "constant", "scope": "addStaffMember", "scopeKind": "function"}, {"_type": "tag", "name": "getStaffMembers", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/staffService.ts", "pattern": "/^export async function getStaffMembers(storeId: string, branchId?: string): Promise<{ data?: User/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "mappedData", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/staffService.ts", "pattern": "/^        const mappedData = (data || []).map((user: any) => ({$/", "language": "TypeScript", "kind": "constant", "scope": "getStaffMembers", "scopeKind": "function"}, {"_type": "tag", "name": "supabase", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/staffService.ts", "pattern": "/^        const supabase = await createServerClient();$/", "language": "TypeScript", "kind": "constant", "scope": "addStaffMember", "scopeKind": "function"}, {"_type": "tag", "name": "supabase", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/staffService.ts", "pattern": "/^        const supabase = await createServerClient();$/", "language": "TypeScript", "kind": "constant", "scope": "getStaffMembers", "scopeKind": "function"}, {"_type": "tag", "name": "supabaseAdmin", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/staffService.ts", "pattern": "/^        const supabaseAdmin = await createAdminClient();$/", "language": "TypeScript", "kind": "constant", "scope": "addStaffMember", "scopeKind": "function"}, {"_type": "tag", "name": "userId", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/staffService.ts", "pattern": "/^        const userId = authData.user.id;$/", "language": "TypeScript", "kind": "constant", "scope": "addStaffMember", "scopeKind": "function"}], "hash": "c0940c6ee2a2615964a648ee0416e71c", "format-version": 4, "code-base-name": "kirana-fintech", "filename": "src/lib/services/staffService.ts", "revision_history": [{"217": "407fc76aca9d4e2629877b12781490020c6f85a2"}]}