{"is_source_file": true, "format": "TypeScript", "description": "This file contains service functions for managing stores, products, categories, branches, and administrative actions in a fintech or retail management application. It includes authentication checks, CRUD operations, data fetching with relational joins, and role-based access control.", "external_files": ["@/lib/supabase/server", "@/types"], "external_methods": ["createServerClient", "supabase.auth.getUser", "supabase.from", "supabase.select", "supabase.in", "supabase.order", "supabase.update", "supabase.insert", "supabase.eq", "supabase.single", "supabase.delete", "supabase.rpc"], "published": ["getOwnerBranchInfo", "getOwnerProducts", "updateProductPrice", "addProduct", "getAdminBranches", "getAdminAllProducts", "getAdminStockReport", "getCategories", "addCategory", "getAllStores", "getStoreBranches", "createBranch"], "classes": [], "methods": [{"name": "async function verifyAdminOrThrow() { verifyAdminOrThrow", "description": "Verifies if the current user has admin privileges and returns user context or throws an error.", "scope": "", "scopeKind": ""}, {"name": "export async function getOwnerBranchInfo(branchId: string): Promise<{ data?: OwnerBranchInfo; er/ getOwnerBranchInfo", "description": "Fetches detailed information about a specific owner\u2019s branch, including store details.", "scope": "", "scopeKind": ""}, {"name": "export async function getOwnerProducts(branchId: string): Promise<{ data?: OwnerProduct[]; error/ getOwnerProducts", "description": "Retrieves a list of products associated with a specific owner\u2019s branch, including category information.", "scope": "", "scopeKind": ""}, {"name": "export async function updateProductPrice(productId: string, newPrice: number, branchId: string):/ updateProductPrice", "description": "Updates the unit price of a specific product, with authorization checks for user role and branch ownership.", "scope": "", "scopeKind": ""}, {"name": "export async function addProduct(product: { addProduct", "description": "Adds a new product to a specified branch, performing role and branch ownership verification.", "scope": "", "scopeKind": ""}, {"name": "export async function getAdminBranches(storeId: string): Promise<{ data?: AdminBranchInfo[]; err/ getAdminBranches", "description": "Fetches all branches for a given store, along with assigned managers via admin privileges.", "scope": "", "scopeKind": ""}, {"name": "export async function getAdminAllProducts(storeId: string): Promise<{ data?: AdminProduct[]; err/ getAdminAllProducts", "description": "Retrieves all products across all branches of a store, optimized with relational joins.", "scope": "", "scopeKind": ""}, {"name": "export async function getAdminStockReport(storeId: string): Promise<{ data?: StockReportItem[]; / getAdminStockReport", "description": "Generates a summarized stock report aggregating stock quantities per product and category.", "scope": "", "scopeKind": ""}, {"name": "export async function getCategories(branchId: string): Promise<{ data?: { id: string; name: stri/ getCategories", "description": "Retrieves product categories for a specific branch.", "scope": "", "scopeKind": ""}, {"name": "export async function addCategory(name: string, branchId: string): Promise<{ success?: boolean; / addCategory", "description": "Adds a new product category to a branch, with access control.", "scope": "", "scopeKind": ""}, {"name": "export async function getAllStores(): Promise<{ data?: { id: string, name: string }[]; error?: s/ getAllStores", "description": "Fetches a list of all stores available in the system.", "scope": "", "scopeKind": ""}, {"name": "export async function getStoreBranches(storeId: string): Promise<{ data?: { id: string, name: st/ getStoreBranches", "description": "Retrieves all branches associated with a specific store.", "scope": "", "scopeKind": ""}, {"name": "export async function createBranch(storeId: string, branchAddress: string, branchName: string): / createBranch", "description": "Creates a new branch within a store, requiring admin privileges.", "scope": "", "scopeKind": ""}], "calls": ["createServerClient", "supabase.auth.getUser", "supabase.from", "supabase.select", "supabase.in", "supabase.order", "supabase.update", "supabase.insert", "supabase.eq", "supabase.single", "supabase.delete", "supabase.rpc"], "search-terms": ["storeManagementService", "adminBranches", "ownerProducts", "adminStockReport", "createBranch", "getAdminBranches", "getOwnerBranchInfo", "getCategories", "addCategory", "updateProductPrice", "addProduct", "getAllStores", "getStoreBranches"], "state": 2, "file_id": 61, "knowledge_revision": 229, "git_revision": "407fc76aca9d4e2629877b12781490020c6f85a2", "ctags": [{"_type": "tag", "name": "addCategory", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^export async function addCategory(name: string, branchId: string): Promise<{ success?: boolean; /", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "addProduct", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^export async function addProduct(product: {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "aggregationMap", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^    const aggregationMap = new Map<string, StockReportItem>();$/", "language": "TypeScript", "kind": "constant", "scope": "getAdminStockReport", "scopeKind": "function"}, {"_type": "tag", "name": "branchIds", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^        const branchIds = branches.map(b => b.id);$/", "language": "TypeScript", "kind": "constant", "scope": "getAdminBranches", "scopeKind": "function"}, {"_type": "tag", "name": "createBranch", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^export async function createBranch(storeId: string, branchAddress: string, branchName: string): /", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^        const { data, error } = await supabase$/", "language": "TypeScript", "kind": "constant", "scope": "createBranch", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^        const { data, error } = await supabase$/", "language": "TypeScript", "kind": "constant", "scope": "getAdminAllProducts", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^        const { data: branches, error: branchesError } = await supabase$/", "language": "TypeScript", "kind": "constant", "scope": "getAdminBranches", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^        const { data: managers, error: managersError } = await supabase$/", "language": "TypeScript", "kind": "constant", "scope": "getAdminBranches", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^    const { data, error } = await dbClient$/", "language": "TypeScript", "kind": "constant", "scope": "addCategory", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^    const { data, error } = await supabase$/", "language": "TypeScript", "kind": "constant", "scope": "getAllStores", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^    const { data, error } = await supabase$/", "language": "TypeScript", "kind": "constant", "scope": "getCategories", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^    const { data, error } = await supabase$/", "language": "TypeScript", "kind": "constant", "scope": "getOwnerBranchInfo", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^    const { data, error } = await supabase$/", "language": "TypeScript", "kind": "constant", "scope": "getOwnerProducts", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^    const { data, error } = await supabase$/", "language": "TypeScript", "kind": "constant", "scope": "getStoreBranches", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^    const { data: profile } = await supabase.from('users').select('role, branch_id').eq('id', us/", "language": "TypeScript", "kind": "constant", "scope": "addCategory", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^    const { data: profile } = await supabase.from('users').select('role, branch_id').eq('id', us/", "language": "TypeScript", "kind": "constant", "scope": "addProduct", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^    const { data: profile } = await supabase.from('users').select('role, branch_id').eq('id', us/", "language": "TypeScript", "kind": "constant", "scope": "updateProductPrice", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^    const { data: profile, error: profileError } = await supabase$/", "language": "TypeScript", "kind": "constant", "scope": "verifyAdminOrThrow", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^    const { data: { user } } = await supabase.auth.getUser(); \\/\\/ Check auth$/", "language": "TypeScript", "kind": "constant", "scope": "getCategories", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^    const { data: { user } } = await supabase.auth.getUser();$/", "language": "TypeScript", "kind": "constant", "scope": "addCategory", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^    const { data: { user } } = await supabase.auth.getUser();$/", "language": "TypeScript", "kind": "constant", "scope": "addProduct", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^    const { data: { user } } = await supabase.auth.getUser();$/", "language": "TypeScript", "kind": "constant", "scope": "updateProductPrice", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^    const { data: { user }, error: authError } = await supabase.auth.getUser();$/", "language": "TypeScript", "kind": "constant", "scope": "verifyAdminOrThrow", "scopeKind": "function"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^        const { data, error } = await supabase$/", "language": "TypeScript", "kind": "constant", "scope": "createBranch", "scopeKind": "function"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^        const { data, error } = await supabase$/", "language": "TypeScript", "kind": "constant", "scope": "getAdminAllProducts", "scopeKind": "function"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^        const { data: branches, error: branchesError } = await supabase$/", "language": "TypeScript", "kind": "constant", "scope": "getAdminBranches", "scopeKind": "function"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^        const { data: managers, error: managersError } = await supabase$/", "language": "TypeScript", "kind": "constant", "scope": "getAdminBranches", "scopeKind": "function"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^    const { data, error } = await dbClient$/", "language": "TypeScript", "kind": "constant", "scope": "addCategory", "scopeKind": "function"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^    const { data, error } = await supabase$/", "language": "TypeScript", "kind": "constant", "scope": "getAllStores", "scopeKind": "function"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^    const { data, error } = await supabase$/", "language": "TypeScript", "kind": "constant", "scope": "getCategories", "scopeKind": "function"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^    const { data, error } = await supabase$/", "language": "TypeScript", "kind": "constant", "scope": "getOwnerBranchInfo", "scopeKind": "function"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^    const { data, error } = await supabase$/", "language": "TypeScript", "kind": "constant", "scope": "getOwnerProducts", "scopeKind": "function"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^    const { data, error } = await supabase$/", "language": "TypeScript", "kind": "constant", "scope": "getStoreBranches", "scopeKind": "function"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^    const { data: profile, error: profileError } = await supabase$/", "language": "TypeScript", "kind": "constant", "scope": "verifyAdminOrThrow", "scopeKind": "function"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^    const { data: { user }, error: authError } = await supabase.auth.getUser();$/", "language": "TypeScript", "kind": "constant", "scope": "verifyAdminOrThrow", "scopeKind": "function"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^    const { error } = await dbClient$/", "language": "TypeScript", "kind": "constant", "scope": "addProduct", "scopeKind": "function"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^    const { error } = await dbClient$/", "language": "TypeScript", "kind": "constant", "scope": "updateProductPrice", "scopeKind": "function"}, {"_type": "tag", "name": "getAdminAllProducts", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^export async function getAdminAllProducts(storeId: string): Promise<{ data?: AdminProduct[]; err/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getAdminBranches", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^export async function getAdminBranches(storeId: string): Promise<{ data?: AdminBranchInfo[]; err/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getAdminStockReport", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^export async function getAdminStockReport(storeId: string): Promise<{ data?: StockReportItem[]; /", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getAllStores", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^export async function getAllStores(): Promise<{ data?: { id: string, name: string }[]; error?: s/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getCategories", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^export async function getCategories(branchId: string): Promise<{ data?: { id: string; name: stri/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getOwnerBranchInfo", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^export async function getOwnerBranchInfo(branchId: string): Promise<{ data?: OwnerBranchInfo; er/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getOwnerProducts", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^export async function getOwnerProducts(branchId: string): Promise<{ data?: OwnerProduct[]; error/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getStoreBranches", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^export async function getStoreBranches(storeId: string): Promise<{ data?: { id: string, name: st/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "item", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^        const item = aggregationMap.get(key)!;$/", "language": "TypeScript", "kind": "constant", "scope": "getAdminStockReport", "scopeKind": "function"}, {"_type": "tag", "name": "key", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^        const key = `${p.product_name}|${p.category_name}`;$/", "language": "TypeScript", "kind": "constant", "scope": "getAdminStockReport", "scopeKind": "function"}, {"_type": "tag", "name": "managerByBranch", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^        const managerByBranch: Record<string, any> = {};$/", "language": "TypeScript", "kind": "constant", "scope": "getAdminBranches", "scopeKind": "function"}, {"_type": "tag", "name": "mappedData", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^        const mappedData = data.map((item: any) => {$/", "language": "TypeScript", "kind": "constant", "scope": "getAdminAllProducts", "scopeKind": "function"}, {"_type": "tag", "name": "mappedData", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^        const mappedData: AdminBranchInfo[] = branches.map(b => ({$/", "language": "TypeScript", "kind": "constant", "scope": "getAdminBranches", "scopeKind": "function"}, {"_type": "tag", "name": "mappedData", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^    const mappedData = data.map((item: any) => ({$/", "language": "TypeScript", "kind": "constant", "scope": "getOwnerProducts", "scopeKind": "function"}, {"_type": "tag", "name": "products", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^    const products = result.data;$/", "language": "TypeScript", "kind": "constant", "scope": "getAdminStockReport", "scopeKind": "function"}, {"_type": "tag", "name": "result", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^    const result = await getAdminAllProducts(storeId);$/", "language": "TypeScript", "kind": "constant", "scope": "getAdminStockReport", "scopeKind": "function"}, {"_type": "tag", "name": "supabase", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^        const { supabase } = await verifyAdminOrThrow();$/", "language": "TypeScript", "kind": "constant", "scope": "createBranch", "scopeKind": "function"}, {"_type": "tag", "name": "supabase", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^        const { supabase } = await verifyAdminOrThrow();$/", "language": "TypeScript", "kind": "constant", "scope": "getAdminAllProducts", "scopeKind": "function"}, {"_type": "tag", "name": "supabase", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^        const { supabase } = await verifyAdminOrThrow();$/", "language": "TypeScript", "kind": "constant", "scope": "getAdminBranches", "scopeKind": "function"}, {"_type": "tag", "name": "supabase", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^    const supabase = await createServerClient();$/", "language": "TypeScript", "kind": "constant", "scope": "addCategory", "scopeKind": "function"}, {"_type": "tag", "name": "supabase", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^    const supabase = await createServerClient();$/", "language": "TypeScript", "kind": "constant", "scope": "addProduct", "scopeKind": "function"}, {"_type": "tag", "name": "supabase", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^    const supabase = await createServerClient();$/", "language": "TypeScript", "kind": "constant", "scope": "getAllStores", "scopeKind": "function"}, {"_type": "tag", "name": "supabase", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^    const supabase = await createServerClient();$/", "language": "TypeScript", "kind": "constant", "scope": "getCategories", "scopeKind": "function"}, {"_type": "tag", "name": "supabase", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^    const supabase = await createServerClient();$/", "language": "TypeScript", "kind": "constant", "scope": "getOwnerBranchInfo", "scopeKind": "function"}, {"_type": "tag", "name": "supabase", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^    const supabase = await createServerClient();$/", "language": "TypeScript", "kind": "constant", "scope": "getOwnerProducts", "scopeKind": "function"}, {"_type": "tag", "name": "supabase", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^    const supabase = await createServerClient();$/", "language": "TypeScript", "kind": "constant", "scope": "getStoreBranches", "scopeKind": "function"}, {"_type": "tag", "name": "supabase", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^    const supabase = await createServerClient();$/", "language": "TypeScript", "kind": "constant", "scope": "updateProductPrice", "scopeKind": "function"}, {"_type": "tag", "name": "supabase", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^    const supabase = await createServerClient();$/", "language": "TypeScript", "kind": "constant", "scope": "verifyAdminOrThrow", "scopeKind": "function"}, {"_type": "tag", "name": "updateProductPrice", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^export async function updateProductPrice(productId: string, newPrice: number, branchId: string):/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "verifyAdminOrThrow", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/services/storeManagementService.ts", "pattern": "/^async function verifyAdminOrThrow() {$/", "language": "TypeScript", "kind": "function"}], "hash": "154039123b58852bae6ac8426fa3ecd0", "format-version": 4, "code-base-name": "kirana-fintech", "filename": "src/lib/services/storeManagementService.ts", "revision_history": [{"229": "407fc76aca9d4e2629877b12781490020c6f85a2"}]}