{"is_source_file": true, "format": "TypeScript", "description": "This file implements a Firebase-based Notification Service with functions to send, mark, delete, and subscribe to notifications, managing real-time updates within a Firebase database.", "external_files": ["firebase/database", "@/lib/firebase/config", "@/types"], "external_methods": ["ref", "push", "set", "onValue", "off", "update", "remove"], "published": ["sendNotification", "markNotificationAsRead", "markAllNotificationsAsRead", "deleteNotification", "subscribeToNotifications"], "classes": [], "methods": [{"name": "export async function sendNotification(userId: string, notification: Omit<Notification, 'id'>): / sendNotification", "description": "Sends a notification to a specific user by creating a new entry in Firebase database.", "scope": "", "scopeKind": ""}, {"name": "export async function markNotificationAsRead(userId: string, notificationId: string): Promise<{ / markNotificationAsRead", "description": "Marks a specific notification as read for a user.", "scope": "", "scopeKind": ""}, {"name": "export async function markAllNotificationsAsRead(userId: string): Promise<{ success: boolean; er/ markAllNotificationsAsRead", "description": "Marks all notifications as read for a specific user.", "scope": "", "scopeKind": ""}, {"name": "export async function deleteNotification(userId: string, notificationId: string): Promise<{ succ/ deleteNotification", "description": "Deletes a specific notification for a user.", "scope": "", "scopeKind": ""}, {"name": "export function subscribeToNotifications( subscribeToNotifications", "description": "Subscribes to real-time notifications for a user, providing updates via callback.", "scope": "", "scopeKind": ""}], "calls": ["ref(db, ...)", "push(notificationsRef)", "set(newNotificationRef, ...)", "update(notificationRef, ...)", "remove(notificationRef)", "onValue(notificationsRef, ...)", "off(notificationsRef, 'value', listener)"], "search-terms": ["firebase notification service", "real-time notification", "mark notifications read", "subscribe to notifications", "firebase database notifications"], "state": 2, "file_id": 51, "knowledge_revision": 214, "git_revision": "407fc76aca9d4e2629877b12781490020c6f85a2", "ctags": [{"_type": "tag", "name": "deleteNotification", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/firebase/notificationService.ts", "pattern": "/^export async function deleteNotification(userId: string, notificationId: string): Promise<{ succ/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/firebase/notificationService.ts", "pattern": "/^            id: newNotificationRef.key,$/", "language": "TypeScript", "kind": "constant", "scope": "sendNotification", "scopeKind": "function"}, {"_type": "tag", "name": "listener", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/firebase/notificationService.ts", "pattern": "/^    const listener = onValue(notificationsRef, (snapshot) => {$/", "language": "TypeScript", "kind": "constant", "scope": "subscribeToNotifications", "scopeKind": "function"}, {"_type": "tag", "name": "markAllNotificationsAsRead", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/firebase/notificationService.ts", "pattern": "/^export async function markAllNotificationsAsRead(userId: string): Promise<{ success: boolean; er/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "markNotificationAsRead", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/firebase/notificationService.ts", "pattern": "/^export async function markNotificationAsRead(userId: string, notificationId: string): Promise<{ /", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "newNotificationRef", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/firebase/notificationService.ts", "pattern": "/^        const newNotificationRef = push(notificationsRef);$/", "language": "TypeScript", "kind": "constant", "scope": "sendNotification", "scopeKind": "function"}, {"_type": "tag", "name": "notificationData", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/firebase/notificationService.ts", "pattern": "/^        const notificationData = {$/", "language": "TypeScript", "kind": "constant", "scope": "sendNotification", "scopeKind": "function"}, {"_type": "tag", "name": "notificationRef", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/firebase/notificationService.ts", "pattern": "/^        const notificationRef = ref(db, `notifications\\/${userId}\\/${notificationId}`);$/", "language": "TypeScript", "kind": "constant", "scope": "deleteNotification", "scopeKind": "function"}, {"_type": "tag", "name": "notificationRef", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/firebase/notificationService.ts", "pattern": "/^        const notificationRef = ref(db, `notifications\\/${userId}\\/${notificationId}`);$/", "language": "TypeScript", "kind": "constant", "scope": "markNotificationAsRead", "scopeKind": "function"}, {"_type": "tag", "name": "notifications", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/firebase/notificationService.ts", "pattern": "/^                const notifications = snapshot.val();$/", "language": "TypeScript", "kind": "constant", "scope": "markAllNotificationsAsRead", "scopeKind": "function"}, {"_type": "tag", "name": "notificationsRef", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/firebase/notificationService.ts", "pattern": "/^        const notificationsRef = ref(db, `notifications\\/${userId}`);$/", "language": "TypeScript", "kind": "constant", "scope": "markAllNotificationsAsRead", "scopeKind": "function"}, {"_type": "tag", "name": "notificationsRef", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/firebase/notificationService.ts", "pattern": "/^        const notificationsRef = ref(db, `notifications\\/${userId}`);$/", "language": "TypeScript", "kind": "constant", "scope": "sendNotification", "scopeKind": "function"}, {"_type": "tag", "name": "notificationsRef", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/firebase/notificationService.ts", "pattern": "/^    const notificationsRef = ref(db, `notifications\\/${userId}`);$/", "language": "TypeScript", "kind": "constant", "scope": "subscribeToNotifications", "scopeKind": "function"}, {"_type": "tag", "name": "sendNotification", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/firebase/notificationService.ts", "pattern": "/^export async function sendNotification(userId: string, notification: Omit<Notification, 'id'>): /", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "subscribeToNotifications", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/firebase/notificationService.ts", "pattern": "/^export function subscribeToNotifications($/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "updates", "path": "/home/kavia/workspace/code-generation/kirana-fintech/src/lib/firebase/notificationService.ts", "pattern": "/^                    const updates: Record<string, any> = {};$/", "language": "TypeScript", "kind": "constant", "scope": "markAllNotificationsAsRead", "scopeKind": "function"}], "hash": "7c3f235a518f157f6bd3f8fa7cd035b0", "format-version": 4, "code-base-name": "kirana-fintech", "filename": "src/lib/firebase/notificationService.ts", "revision_history": [{"214": "407fc76aca9d4e2629877b12781490020c6f85a2"}]}